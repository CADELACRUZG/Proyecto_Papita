@page "/"
@using System;
<style>
    html, body {
    font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
}

h1:focus {
    outline: none;
}

a, .btn-link {
    color: #0071c1;
}

.btn-primary {
    color: #fff;
    background-color: #1b6ec2;
    border-color: #1861ac;
}

.content {
    padding-top: 1.1rem;

}

.valid.modified:not([type=checkbox]) {
    outline: 1px solid #26b050;
}

.invalid {
    outline: 1px solid red;
}

.validation-message {
    color: red;
}

#blazor-error-ui {
    background: lightyellow;
    bottom: 0;
    box-shadow: 0 -1px 2px rgba(0, 0, 0, 0.2);
    display: none;
    left: 0;
    padding: 0.6rem 1.25rem 0.7rem 1.25rem;
    position: fixed;
    width: 100%;
    z-index: 1000;
}

    #blazor-error-ui .dismiss {
        cursor: pointer;
        position: absolute;
        right: 0.75rem;
        top: 0.5rem;
    }

.blazor-error-boundary {
    background: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTYiIGhlaWdodD0iNDkiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIG92ZXJmbG93PSJoaWRkZW4iPjxkZWZzPjxjbGlwUGF0aCBpZD0iY2xpcDAiPjxyZWN0IHg9IjIzNSIgeT0iNTEiIHdpZHRoPSI1NiIgaGVpZ2h0PSI0OSIvPjwvY2xpcFBhdGg+PC9kZWZzPjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMCkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMzUgLTUxKSI+PHBhdGggZD0iTTI2My41MDYgNTFDMjY0LjcxNyA1MSAyNjUuODEzIDUxLjQ4MzcgMjY2LjYwNiA1Mi4yNjU4TDI2Ny4wNTIgNTIuNzk4NyAyNjcuNTM5IDUzLjYyODMgMjkwLjE4NSA5Mi4xODMxIDI5MC41NDUgOTIuNzk1IDI5MC42NTYgOTIuOTk2QzI5MC44NzcgOTMuNTEzIDI5MSA5NC4wODE1IDI5MSA5NC42NzgyIDI5MSA5Ny4wNjUxIDI4OS4wMzggOTkgMjg2LjYxNyA5OUwyNDAuMzgzIDk5QzIzNy45NjMgOTkgMjM2IDk3LjA2NTEgMjM2IDk0LjY3ODIgMjM2IDk0LjM3OTkgMjM2LjAzMSA5NC4wODg2IDIzNi4wODkgOTMuODA3MkwyMzYuMzM4IDkzLjAxNjIgMjM2Ljg1OCA5Mi4xMzE0IDI1OS40NzMgNTMuNjI5NCAyNTkuOTYxIDUyLjc5ODUgMjYwLjQwNyA1Mi4yNjU4QzI2MS4yIDUxLjQ4MzcgMjYyLjI5NiA1MSAyNjMuNTA2IDUxWk0yNjMuNTg2IDY2LjAxODNDMjYwLjczNyA2Ni4wMTgzIDI1OS4zMTMgNjcuMTI0NSAyNTkuMzEzIDY5LjMzNyAyNTkuMzEzIDY5LjYxMDIgMjU5LjMzMiA2OS44NjA4IDI1OS4zNzEgNzAuMDg4N0wyNjEuNzk1IDg0LjAxNjEgMjY1LjM4IDg0LjAxNjEgMjY3LjgyMSA2OS43NDc1QzI2Ny44NiA2OS43MzA5IDI2Ny44NzkgNjkuNTg3NyAyNjcuODc5IDY5LjMxNzkgMjY3Ljg3OSA2Ny4xMTgyIDI2Ni40NDggNjYuMDE4MyAyNjMuNTg2IDY2LjAxODNaTTI2My41NzYgODYuMDU0N0MyNjEuMDQ5IDg2LjA1NDcgMjU5Ljc4NiA4Ny4zMDA1IDI1OS43ODYgODkuNzkyMSAyNTkuNzg2IDkyLjI4MzcgMjYxLjA0OSA5My41Mjk1IDI2My41NzYgOTMuNTI5NSAyNjYuMTE2IDkzLjUyOTUgMjY3LjM4NyA5Mi4yODM3IDI2Ny4zODcgODkuNzkyMSAyNjcuMzg3IDg3LjMwMDUgMjY2LjExNiA4Ni4wNTQ3IDI2My41NzYgODYuMDU0N1oiIGZpbGw9IiNGRkU1MDAiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjwvZz48L3N2Zz4=) no-repeat 1rem/1.8rem, #b32121;
    padding: 1rem 1rem 1rem 3.7rem;
    color: white;
}

    .blazor-error-boundary::after {
        content: "An error has occurred."
    }
</style>

<h1>Proyecto de Leyes Trigonométricas</h1>

<div class="container">
    <div class="row mt-4">
        <div class="col-md-6">
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h3>Figura 1: Pirámide Triangular</h3>
                </div>
                <div class="card-body">
                    <div class="form-group">
                        <label for="valorS">Valor de s (lado base):</label>
                        <input type="number" id="valorS" class="form-control" @bind="s" step="0.01" />
                    </div>
                    
                    <button class="btn btn-primary mt-3" @onclick="CalcularFigura1">Calcular</button>
                    
                    @if (mostrarResultados)
                    {
                        <div class="mt-4">
                            <h4>Resultados:</h4>
                            <ul class="list-group">
                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                    Altura (h) = √(s²+s²) = s√2
                                    <span class="badge bg-primary rounded-pill">@altura.ToString("F2")</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                    Arista (√(s²+s²+s²) = s√3)
                                    <span class="badge bg-primary rounded-pill">@arista.ToString("F2")</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                    Longitud A: √(s²+(s/2)²) = s√(5/4)
                                    <span class="badge bg-primary rounded-pill">@longitudA.ToString("F2")</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                    Longitud B: √(s²+s²) = s√2
                                    <span class="badge bg-primary rounded-pill">@longitudB.ToString("F2")</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                    Longitud C: √(s²+1²) = √(s²+1)
                                    <span class="badge bg-primary rounded-pill">@longitudC.ToString("F2")</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                    Ángulo B (grados)
                                    <span class="badge bg-primary rounded-pill">@anguloB.ToString("F2")°</span>
                                </li>
                            </ul>
                        </div>
                    }
                </div>
            </div>
        </div>
        
        <div class="col-md-6">
            <div class="card">
                <div class="card-header bg-info text-white">
                    <h3>Fórmulas Utilizadas</h3>
                </div>
                <div class="card-body">
                    <ul class="list-group">
                        <li class="list-group-item">h = √(s²+s²) = s√2</li>
                        <li class="list-group-item">Arista = √(s²+s²+s²) = s√3</li>
                        <li class="list-group-item">Lado A = √(s²+(s/2)²) = s√(5/4)</li>
                        <li class="list-group-item">Lado B = √(s²+s²) = s√2</li>
                        <li class="list-group-item">Lado C = √(s²+1²) = √(s²+1)</li>
                        <li class="list-group-item">B = cos⁻¹((a²+c²-b²)/(2ac))</li>
                    </ul>
                </div>
            </div>
            
            <div class="card mt-4">
                <div class="card-header bg-success text-white">
                    <h3>Visualización</h3>
                </div>
                <div class="card-body text-center">
                    @if (mostrarResultados)
                    {
                        <svg width="300" height="300" viewBox="-150 -150 300 300">
                            <!-- Base triangular -->
                            @{
                                double factorEscala = 50; // Factor de escala para la visualización
                                double sVisualizacion = s * factorEscala;
                                double alturaVisualizacion = altura * factorEscala * 0.5;
                                
                                // Coordenadas para el triángulo base
                                double x1 = -sVisualizacion/2;
                                double y1 = sVisualizacion/2 * 0.866; // sqrt(3)/2
                                double x2 = sVisualizacion/2;
                                double y2 = sVisualizacion/2 * 0.866;
                                double x3 = 0;
                                double y3 = -sVisualizacion/2 * 0.866;
                                double xCentro = 0;
                                double yCentro = 0;
                                double zCentro = -alturaVisualizacion;
                            }
                            
                            <!-- Triángulo base -->
                            <polygon points="@x1,@y1 @x2,@y2 @x3,@y3" 
                                     fill="rgba(173, 216, 230, 0.5)" 
                                     stroke="blue" 
                                     stroke-width="1.5" />
                            
                            <!-- Aristas a la punta -->
                            <line x1="@x1" y1="@y1" x2="@xCentro" y2="@zCentro" 
                                  stroke="red" stroke-width="1.5" />
                            <line x1="@x2" y1="@y2" x2="@xCentro" y2="@zCentro" 
                                  stroke="red" stroke-width="1.5" />
                            <line x1="@x3" y1="@y3" x2="@xCentro" y2="@zCentro" 
                                  stroke="red" stroke-width="1.5" />
                            
                            <!-- Punto en la punta -->
                            <circle cx="@xCentro" cy="@zCentro" r="3" fill="black" />
                            
                            <!-- Etiquetas -->
                            <text x="@(x1 - 10)" y="@(y1 + 15)" fill="black">A</text>
                            <text x="@(x2 + 10)" y="@(y2 + 15)" fill="black">B</text>
                            <text x="@(x3)" y="@(y3 - 10)" fill="black">C</text>
                            <text x="@(xCentro)" y="@(zCentro - 10)" fill="black">D</text>
                            
                            <!-- Medidas -->
                            <text x="@((x1 + x2)/2)" y="@((y1 + y2)/2 + 15)" fill="darkgreen">s = @s</text>
                            <text x="@((xCentro + x3)/2)" y="@((zCentro + y3)/2)" fill="darkgreen">h = @altura.ToString("F2")</text>
                            <text x="@((x1 + xCentro)/2 - 20)" y="@((y1 + zCentro)/2)" fill="darkred">Arista = @arista.ToString("F2")</text>
                        </svg>
                        <p class="mt-2">Representación de la pirámide triangular (vista en perspectiva)</p>
                    }
                    else
                    {
                        <p>Ingrese un valor y presione "Calcular" para visualizar la pirámide</p>
                    }
                </div>
            </div>
        </div>
    </div>
</div>

@code {
    private double s = 1.0;
    private double altura;
    private double arista;
    private double longitudA;
    private double longitudB;
    private double longitudC;
    private double anguloB;
    private bool mostrarResultados = false;

    private void CalcularFigura1()
    {
        // Cálculos según las fórmulas mostradas
        altura = s * Math.Sqrt(2);
        arista = s * Math.Sqrt(3);
        
        // Para los lados según la imagen
        longitudA = s * Math.Sqrt(5.0/4.0); // Corregido según la fórmula
        longitudB = s * Math.Sqrt(2);
        longitudC = Math.Sqrt(Math.Pow(s, 2) + 1);
        
        // Para el ángulo B utilizando la ley de cosenos
        double a = longitudA;
        double b = longitudB;
        double c = longitudC;
        
        double cosB = (Math.Pow(a, 2) + Math.Pow(c, 2) - Math.Pow(b, 2)) / (2 * a * c);
        anguloB = Math.Acos(cosB) * 180 / Math.PI;
        
        mostrarResultados = true;
    }
}
